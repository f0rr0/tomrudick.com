var Email = function() {
    return {
        init: function(element) {
            var sent_series = {{json gmail_traffic.sent}};
            var received_series = {{json gmail_traffic.received}};

            var graph = new Rickshaw.Graph( {
                element: document.getElementById(element),
                width: 780,
                height: 150,
                renderer: 'bar',
                stroke: true,
                preserve: true,
                series: [
                    {
                        data: sent_series,
                        name: 'Sent',
                        color: '#356aa0',
                    },
                    {
                        data: received_series,
                        name: 'Received',
                        color: '#b02b2c',
                    }
                ]
            });

            graph.renderer.unstack = true;
            graph.render();

            var hoverDetail = new Rickshaw.Graph.HoverDetail( {
                graph: graph
            });

            var time = new Rickshaw.Fixtures.Time();

            var formatter = time.unit('day');
            formatter.formatter = function(d) {
                switch(d.getDay()) {
                    case 0: return 'Sun';
                    case 1: return 'Mon';
                    case 2: return 'Tue';
                    case 3: return 'Wed';
                    case 4: return 'Thurs';
                    case 5: return 'Fri';
                    case 6: return 'Sat'
                };
            };

            var yAxis = new Rickshaw.Graph.Axis.Y( {
                graph: graph,
                tickFormat: Rickshaw.Fixtures.Number.formatKMBT,
                ticksTreatment: 'glow'
            });

            yAxis.render();
        }
    }
}();